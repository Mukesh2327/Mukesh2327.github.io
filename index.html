<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ultimate interactive HTML website with games, music, animations, and avatars. Features Snake game, Memory game, Piano, virtual pet, and stunning visual effects.">
    <meta name="keywords" content="HTML games, interactive website, Snake game, Piano, virtual pet, web animations, HTML5 canvas">
    <meta name="author" content="TechHub Interactive">
    <title>🎮 TechHub Interactive - Ultimate Gaming & Entertainment Hub</title>
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E🎮%3C/text%3E%3C/svg%3E">
    
    <style>
        :root {
            --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --neon-blue: #00d4ff;
            --neon-pink: #ff006e;
            --neon-green: #39ff14;
            --dark: #0f172a;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--primary);
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: var(--primary);
            overflow: hidden;
        }

        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .shape {
            position: absolute;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            animation: float 6s ease-in-out infinite;
        }

        .shape:nth-child(1) {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            width: 120px;
            height: 120px;
            top: 60%;
            left: 80%;
            border-radius: 20px;
            animation-delay: 2s;
        }

        .shape:nth-child(3) {
            width: 60px;
            height: 60px;
            top: 80%;
            left: 20%;
            border-radius: 50%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Navigation */
        nav {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 1rem;
            margin-bottom: 2rem;
            position: sticky;
            top: 20px;
            z-index: 1000;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 20px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        nav a:hover::before {
            left: 100%;
        }

        nav a:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border-color: var(--neon-blue);
            background: rgba(255,255,255,0.2);
        }

        /* Header */
        header {
            text-align: center;
            padding: 4rem 0;
            position: relative;
        }

        header h1 {
            font-size: clamp(2.5rem, 6vw, 4rem);
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink), var(--neon-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 20px var(--neon-blue)); }
            to { filter: drop-shadow(0 0 30px var(--neon-pink)); }
        }

        header p {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .cta-btn {
            background: var(--secondary);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .cta-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        /* Game Cards */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .game-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-pink));
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .game-card:hover::before {
            opacity: 0.1;
        }

        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            border-color: var(--neon-blue);
        }

        .game-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .play-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .play-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        /* Game Containers */
        .game-container {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            display: none;
            animation: slideIn 0.5s ease;
        }

        .game-container.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Snake Game */
        #snakeCanvas {
            border: 3px solid var(--neon-green);
            border-radius: 15px;
            background: var(--dark);
            box-shadow: 0 0 30px var(--neon-green);
            display: block;
            margin: 1rem auto;
        }

        /* Memory Game */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: var(--glass);
            border: 2px solid var(--glass-border);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .memory-card:hover {
            transform: scale(1.05);
            border-color: var(--neon-blue);
        }

        .memory-card.flipped {
            background: var(--accent);
            border-color: var(--neon-blue);
        }

        .memory-card.matched {
            background: var(--success);
            border-color: var(--neon-green);
            animation: pulse 0.5s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Virtual Piano */
        .piano-container {
            max-width: 800px;
            margin: 2rem auto;
            perspective: 1000px;
        }

        .piano {
            display: flex;
            justify-content: center;
            background: #333;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            transform: rotateX(10deg);
        }

        .piano-key {
            width: 50px;
            height: 200px;
            background: white;
            border: 2px solid #ccc;
            border-radius: 0 0 10px 10px;
            margin: 0 1px;
            cursor: pointer;
            transition: all 0.1s ease;
            position: relative;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }

        .piano-key:hover {
            background: #f0f0f0;
            transform: translateY(2px);
        }

        .piano-key:active, .piano-key.pressed {
            background: var(--neon-blue);
            transform: translateY(4px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .piano-key.black {
            width: 30px;
            height: 130px;
            background: #222;
            position: absolute;
            z-index: 2;
            margin-left: -15px;
        }

        .piano-key.black:hover {
            background: #444;
        }

        .piano-key.black:active, .piano-key.black.pressed {
            background: var(--neon-pink);
        }

        /* Virtual Pet */
        .pet-container {
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
            background: var(--glass);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
        }

        .pet-avatar {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: var(--accent);
            margin: 0 auto 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .pet-avatar:hover {
            transform: scale(1.05);
            animation: bounce 0.5s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1.05) translateY(0); }
            50% { transform: scale(1.05) translateY(-10px); }
        }

        .pet-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-bar {
            background: var(--dark);
            border-radius: 20px;
            padding: 10px;
            border: 1px solid var(--glass-border);
        }

        .stat-fill {
            height: 20px;
            border-radius: 10px;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .stat-fill.happiness {
            background: var(--neon-pink);
        }

        .stat-fill.hunger {
            background: var(--neon-green);
        }

        .stat-fill.energy {
            background: var(--neon-blue);
        }

        .pet-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .pet-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }

        .pet-btn.feed {
            background: var(--success);
        }

        .pet-btn.play {
            background: var(--secondary);
        }

        .pet-btn.sleep {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .pet-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        /* Avatar Creator */
        .avatar-creator {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
        }

        .avatar-preview {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 0 auto 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            border: 3px solid var(--neon-blue);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .avatar-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .control-group {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
        }

        .control-group h4 {
            margin-bottom: 1rem;
            color: var(--neon-blue);
        }

        .avatar-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
        }

        .avatar-option {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid var(--glass-border);
            background: var(--glass);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.5rem;
        }

        .avatar-option:hover, .avatar-option.selected {
            border-color: var(--neon-blue);
            background: var(--accent);
            transform: scale(1.1);
        }

        /* Particle Effects */
        .particle-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--neon-blue);
            border-radius: 50%;
            animation: particle-float 3s linear infinite;
        }

        @keyframes particle-float {
            0% {
                opacity: 1;
                transform: translateY(100vh) scale(0);
            }
            10% {
                transform: translateY(90vh) scale(1);
            }
            90% {
                transform: translateY(-10vh) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-20vh) scale(0);
            }
        }

        /* Music Visualizer */
        .music-visualizer {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            height: 100px;
            gap: 4px;
            margin: 2rem 0;
            padding: 1rem;
            background: var(--dark);
            border-radius: 15px;
            border: 2px solid var(--neon-blue);
        }

        .music-bar {
            width: 20px;
            background: linear-gradient(to top, var(--neon-blue), var(--neon-pink));
            border-radius: 10px 10px 0 0;
            animation: music-bounce 0.5s ease-in-out infinite alternate;
        }

        .music-bar:nth-child(even) {
            animation-delay: 0.1s;
        }

        .music-bar:nth-child(3n) {
            animation-delay: 0.2s;
        }

        @keyframes music-bounce {
            0% { height: 10px; }
            100% { height: 60px; }
        }

        /* Game Stats */
        .game-stats {
            display: flex;
            justify-content: space-around;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 1rem;
            margin: 1rem 0;
            backdrop-filter: blur(10px);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--neon-green);
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Loading Animations */
        .loading {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid var(--glass-border);
            border-top: 4px solid var(--neon-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .games-grid { grid-template-columns: 1fr; }
            .piano-key { width: 40px; height: 160px; }
            .piano-key.black { width: 25px; height: 100px; }
            header h1 { font-size: 2rem; }
            .cta-buttons { flex-direction: column; align-items: center; }
        }

        /* Special Effects */
        .glow-effect {
            animation: glow-pulse 2s ease-in-out infinite alternate;
        }

        @keyframes glow-pulse {
            from {
                box-shadow: 0 0 20px var(--neon-blue);
            }
            to {
                box-shadow: 0 0 40px var(--neon-pink), 0 0 60px var(--neon-blue);
            }
        }

        .rainbow-text {
            background: linear-gradient(45deg, #ff0000, #ff8000, #ffff00, #80ff00, #00ff80, #0080ff, #8000ff, #ff0080);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow 3s ease-in-out infinite;
        }

        @keyframes rainbow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 1rem 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 10000;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            border-color: var(--success);
        }

        .toast.error {
            border-color: var(--error);
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
        </div>
    </div>

    <!-- Particle Container -->
    <div class="particle-container" id="particles"></div>

    <!-- Navigation -->
    <nav>
        <ul>
            <li><a href="#home" onclick="showSection('home')">🏠 Home</a></li>
            <li><a href="#games" onclick="showSection('games')">🎮 Games</a></li>
            <li><a href="#music" onclick="showSection('music')">🎵 Music</a></li>
            <li><a href="#avatars" onclick="showSection('avatars')">👤 Avatars</a></li>
            <li><a href="#pet" onclick="showSection('pet')">🐾 Virtual Pet</a></li>
        </ul>
    </nav>

    <div class="container">
        <!-- Header -->
        <header id="home">
            <h1 class="rainbow-text">🎮 TechHub Interactive Gaming Hub</h1>
            <p>Experience the ultimate collection of HTML5 games, music, and interactive entertainment!</p>
            <div class="cta-buttons">
                <button class="cta-btn glow-effect" onclick="showSection('games')">🚀 Play Games</button>
                <button class="cta-btn glow-effect" onclick="showSection('music')">🎵 Make Music</button>
                <button class="cta-btn glow-effect" onclick="createParticles()">✨ Create Magic</button>
            </div>

            <!-- Music Visualizer -->
            <div class="music-visualizer" id="visualizer">
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
            </div>
        </header>

        <!-- Games Section -->
        <section id="games-section" class="game-container">
            <h2 style="text-align: center; margin-bottom: 2rem; color: var(--neon-blue);">🎮 Epic Games Collection</h2>
            
            <div class="games-grid">
                <!-- Snake Game Card -->
                <div class="game-card">
                    <span class="game-icon">🐍</span>
                    <h3>Snake Game</h3>
                    <p>Classic snake game with neon effects and power-ups!</p>
                    <button class="play-btn" onclick="startSnakeGame()">Play Snake</button>
                </div>

                <!-- Memory Game Card -->
                <div class="game-card">
                    <span class="game-icon">🧠</span>
                    <h3>Memory Master</h3>
                    <p>Test your memory with this colorful card matching game!</p>
                    <button class="play-btn" onclick="startMemoryGame()">Play Memory</button>
                </div>

                <!-- Reaction Time Card -->
                <div class="game-card">
                    <span class="game-icon">⚡</span>
                    <h3>Reaction Time</h3>
                    <p>How fast are your reflexes? Click when you see green!</p>
                    <button class="play-btn" onclick="startReactionGame()">Test Reflexes</button>
                </div>
            </div>

            <!-- Snake Game -->
            <div id="snake-game" class="game-container">
                <h3 style="text-align: center; margin-bottom: 1rem;">🐍 Snake Game</h3>
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="snake-score">0</div>
                        <div class="stat-label">Score</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="snake-high">0</div>
                        <div class="stat-label">High Score</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="snake-level">1</div>
                        <div class="stat-label">Level</div>
                    </div>
                </div>
                <canvas id="snakeCanvas" width="400" height="400"></canvas>
                <div style="text-align: center; margin-top: 1rem;">
                    <button class="play-btn" onclick="resetSnakeGame()">Reset Game</button>
                    <p style="margin-top: 0.5rem; opacity: 0.8;">Use arrow keys or WASD to move</p>
                </div>
            </div>

            <!-- Memory Game -->
            <div id="memory-game" class="game-container">
                <h3 style="text-align: center; margin-bottom: 1rem;">🧠 Memory Master</h3>
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="memory-moves">0</div>
                        <div class="stat-label">Moves</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="memory-matches">0</div>
                        <div class="stat-label">Matches</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="memory-time">00:00</div>
                        <div class="stat-label">Time</div>
                    </div>
                </div>
                <div class="memory-grid" id="memory-grid"></div>
                <div style="text-align: center; margin-top: 1rem;">
                    <button class="play-btn" onclick="resetMemoryGame()">New Game</button>
                </div>
            </div>

            <!-- Reaction Time Game -->
            <div id="reaction-game" class="game-container">
                <h3 style="text-align: center; margin-bottom: 1rem;">⚡ Reaction Time Test</h3>
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="reaction-time">0ms</div>
                        <div class="stat-label">Last Time</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="reaction-best">∞</div>
                        <div class="stat-label">Best Time</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="reaction-avg">0ms</div>
                        <div class="stat-label">Average</div>
                    </div>
                </div>
                <div id="reaction-area" style="
                    width: 100%;
                    height: 200px;
                    background: var(--error);
                    border-radius: 15px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 1.5rem;
                    font-weight: bold;
                    cursor: pointer;
                    margin: 2rem 0;
                    transition: all 0.3s ease;
                ">
                    Click to Start!
                </div>
                <div style="text-align: center;">
                    <button class="play-btn" onclick="startReactionTest()">Start Test</button>
                </div>
            </div>
        </section>

        <!-- Music Section -->
        <section id="music-section" class="game-container">
            <h2 style="text-align: center; margin-bottom: 2rem; color: var(--neon-pink);">🎵 Music Studio</h2>
            
            <!-- Virtual Piano -->
            <div class="piano-container">
                <h3 style="text-align: center; margin-bottom: 1rem;">🎹 Virtual Piano</h3>
                <div class="piano" id="piano">
                    <!-- Piano keys will be generated by JavaScript -->
                </div>
                <div style="text-align: center; margin-top: 1rem;">
                    <button class="play-btn" onclick="playDemo()">🎵 Play Demo</button>
                    <button class="play-btn" onclick="recordMode()">🔴 Record</button>
                </div>
            </div>

            <!-- Beat Maker -->
            <div style="max-width: 600px; margin: 3rem auto; text-align: center;">
                <h3 style="margin-bottom: 1rem;">🥁 Beat Maker</h3>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin: 2rem 0;">
                    <button class="play-btn" onclick="playBeat('kick')" style="font-size: 2rem; padding: 2rem;">🥁</button>
                    <button class="play-btn" onclick="playBeat('snare')" style="font-size: 2rem; padding: 2rem;">🔥</button>
                    <button class="play-btn" onclick="playBeat('hihat')" style="font-size: 2rem; padding: 2rem;">✨</button>
                    <button class="play-btn" onclick="playBeat('crash')" style="font-size: 2rem; padding: 2rem;">💥</button>
                </div>
                <div>
                    <button class="play-btn" onclick="playAutobeat()">🎵 Auto Beat</button>
                    <button class="play-btn" onclick="stopAutobeat()">⏹️ Stop</button>
                </div>
            </div>
        </section>

        <!-- Virtual Pet Section -->
        <section id="pet-section" class="game-container">
            <h2 style="text-align: center; margin-bottom: 2rem; color: var(--neon-green);">🐾 Virtual Pet</h2>
            
            <div class="pet-container">
                <div class="pet-avatar glow-effect" id="pet-avatar" onclick="petClick()">
                    🐱
                </div>
                <h3 id="pet-name" style="margin-bottom: 1rem;">Whiskers</h3>
                
                <div class="pet-stats">
                    <div class="stat-bar">
                        <div>😊 Happiness</div>
                        <div class="stat-fill happiness" id="happiness-bar" style="width: 80%;">80%</div>
                    </div>
                    <div class="stat-bar">
                        <div>🍕 Hunger</div>
                        <div class="stat-fill hunger" id="hunger-bar" style="width: 60%;">60%</div>
                    </div>
                    <div class="stat-bar">
                        <div>⚡ Energy</div>
                        <div class="stat-fill energy" id="energy-bar" style="width: 90%;">90%</div>
                    </div>
                </div>

                <div class="pet-actions">
                    <button class="pet-btn feed" onclick="feedPet()">🍕 Feed</button>
                    <button class="pet-btn play" onclick="playWithPet()">🎾 Play</button>
                    <button class="pet-btn sleep" onclick="petSleep()">😴 Sleep</button>
                </div>

                <div style="margin-top: 2rem;">
                    <input type="text" id="pet-name-input" placeholder="Enter pet name..." 
                           style="padding: 10px; border-radius: 10px; border: 1px solid var(--glass-border); background: var(--glass); color: white; margin-right: 10px;">
                    <button class="play-btn" onclick="renamePet()">Rename Pet</button>
                </div>
            </div>
        </section>

        <!-- Avatar Creator Section -->
        <section id="avatars-section" class="game-container">
            <h2 style="text-align: center; margin-bottom: 2rem; color: var(--neon-blue);">👤 Avatar Creator</h2>
            
            <div class="avatar-creator">
                <div class="avatar-preview glow-effect" id="avatar-preview">
                    😊
                </div>

                <div class="avatar-controls">
                    <div class="control-group">
                        <h4>Face</h4>
                        <div class="avatar-options">
                            <div class="avatar-option selected" onclick="selectFace('😊')">😊</div>
                            <div class="avatar-option" onclick="selectFace('😎')">😎</div>
                            <div class="avatar-option" onclick="selectFace('🤔')">🤔</div>
                            <div class="avatar-option" onclick="selectFace('😈')">😈</div>
                            <div class="avatar-option" onclick="selectFace('🤖')">🤖</div>
                            <div class="avatar-option" onclick="selectFace('👻')">👻</div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>Background</h4>
                        <div class="avatar-options">
                            <div class="avatar-option selected" onclick="selectBg('accent')" style="background: var(--accent);"></div>
                            <div class="avatar-option" onclick="selectBg('secondary')" style="background: var(--secondary);"></div>
                            <div class="avatar-option" onclick="selectBg('success')" style="background: var(--success);"></div>
                            <div class="avatar-option" onclick="selectBg('warning')" style="background: var(--warning);"></div>
                            <div class="avatar-option" onclick="selectBg('error')" style="background: var(--error);"></div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>Effects</h4>
                        <div class="avatar-options">
                            <div class="avatar-option" onclick="toggleEffect('glow')">✨</div>
                            <div class="avatar-option" onclick="toggleEffect('rainbow')">🌈</div>
                            <div class="avatar-option" onclick="toggleEffect('bounce')">🎾</div>
                            <div class="avatar-option" onclick="toggleEffect('spin')">🌪️</div>
                            <div class="avatar-option" onclick="toggleEffect('pulse')">💓</div>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 2rem;">
                    <button class="play-btn" onclick="saveAvatar()">💾 Save Avatar</button>
                    <button class="play-btn" onclick="randomAvatar()">🎲 Random</button>
                    <button class="play-btn" onclick="shareAvatar()">📤 Share</button>
                </div>
            </div>
        </section>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script>
        // Global variables
        let currentSection = 'home';
        let gameStates = {
            snake: { score: 0, highScore: 0, level: 1, gameRunning: false },
            memory: { moves: 0, matches: 0, time: 0, gameRunning: false },
            reaction: { times: [], bestTime: Infinity, gameRunning: false },
            pet: { happiness: 80, hunger: 60, energy: 90, name: 'Whiskers' },
            avatar: { face: '😊', bg: 'accent', effects: [] }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializePiano();
            initializeParticles();
            loadGameData();
            showSection('home');
            startPetLoop();
        });

        // Section Navigation
        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('.game-container').forEach(el => {
                el.classList.remove('active');
            });
            
            // Show selected section
            const sectionEl = document.getElementById(section + '-section');
            if (sectionEl) {
                sectionEl.classList.add('active');
            }
            
            currentSection = section;
            showToast(`Switched to ${section} section!`, 'success');
        }

        // Toast Notifications
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        // Particle System
        function initializeParticles() {
            setInterval(createParticle, 500);
        }

        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + 'vw';
            particle.style.animationDelay = Math.random() * 3 + 's';
            particle.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 60%)`;
            
            document.getElementById('particles').appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 3000);
        }

        function createParticles() {
            for (let i = 0; i < 20; i++) {
                setTimeout(createParticle, i * 100);
            }
            showToast('✨ Magic particles created!', 'success');
        }

        // Snake Game
        let snake, food, dx, dy, snakeCanvas, snakeCtx;

        function startSnakeGame() {
            showSection('games');
            document.getElementById('snake-game').classList.add('active');
            
            snakeCanvas = document.getElementById('snakeCanvas');
            snakeCtx = snakeCanvas.getContext('2d');
            
            resetSnakeGame();
        }

        function resetSnakeGame() {
            snake = [{x: 200, y: 200}];
            food = {x: 100, y: 100};
            dx = 20;
            dy = 0;
            gameStates.snake.score = 0;
            gameStates.snake.level = 1;
            gameStates.snake.gameRunning = true;
            
            updateSnakeStats();
            gameLoop();
        }

        function gameLoop() {
            if (!gameStates.snake.gameRunning) return;
            
            setTimeout(() => {
                clearCanvas();
                moveSnake();
                drawFood();
                drawSnake();
                checkCollision();
                gameLoop();
            }, 150 - (gameStates.snake.level * 10));
        }

        function clearCanvas() {
            snakeCtx.fillStyle = '#0f172a';
            snakeCtx.fillRect(0, 0, snakeCanvas.width, snakeCanvas.height);
        }

        function drawSnake() {
            snakeCtx.fillStyle = '#39ff14';
            snakeCtx.shadowColor = '#39ff14';
            snakeCtx.shadowBlur = 10;
            
            snake.forEach(segment => {
                snakeCtx.fillRect(segment.x, segment.y, 18, 18);
            });
            
            snakeCtx.shadowBlur = 0;
        }

        function drawFood() {
            snakeCtx.fillStyle = '#ff006e';
            snakeCtx.shadowColor = '#ff006e';
            snakeCtx.shadowBlur = 15;
            snakeCtx.fillRect(food.x, food.y, 18, 18);
            snakeCtx.shadowBlur = 0;
        }

        function moveSnake() {
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            snake.unshift(head);
            
            if (head.x === food.x && head.y === food.y) {
                gameStates.snake.score += 10;
                gameStates.snake.level = Math.floor(gameStates.snake.score / 100) + 1;
                generateFood();
                updateSnakeStats();
                showToast(`Score: ${gameStates.snake.score}!`, 'success');
            } else {
                snake.pop();
            }
        }

        function generateFood() {
            food = {
                x: Math.floor(Math.random() * 20) * 20,
                y: Math.floor(Math.random() * 20) * 20
            };
        }

        function checkCollision() {
            const head = snake[0];
            
            // Wall collision
            if (head.x < 0 || head.x >= 400 || head.y < 0 || head.y >= 400) {
                gameOver();
            }
            
            // Self collision
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    gameOver();
                }
            }
        }

        function gameOver() {
            gameStates.snake.gameRunning = false;
            if (gameStates.snake.score > gameStates.snake.highScore) {
                gameStates.snake.highScore = gameStates.snake.score;
                showToast('🎉 New High Score!', 'success');
            } else {
                showToast('Game Over! Try again!', 'error');
            }
            updateSnakeStats();
            saveGameData();
        }

        function updateSnakeStats() {
            document.getElementById('snake-score').textContent = gameStates.snake.score;
            document.getElementById('snake-high').textContent = gameStates.snake.highScore;
            document.getElementById('snake-level').textContent = gameStates.snake.level;
        }

        // Snake controls
        document.addEventListener('keydown', (e) => {
            if (!gameStates.snake.gameRunning) return;
            
            const key = e.key;
            if ((key === 'ArrowUp' || key === 'w') && dy === 0) {
                dx = 0; dy = -20;
            } else if ((key === 'ArrowDown' || key === 's') && dy === 0) {
                dx = 0; dy = 20;
            } else if ((key === 'ArrowLeft' || key === 'a') && dx === 0) {
                dx = -20; dy = 0;
            } else if ((key === 'ArrowRight' || key === 'd') && dx === 0) {
                dx = 20; dy = 0;
            }
        });

        // Memory Game
        let memoryCards = [];
        let flippedCards = [];
        let memoryTimer;

        const cardEmojis = ['🎮', '🎵', '🎨', '🚀', '⭐', '💎', '🔥', '⚡'];

        function startMemoryGame() {
            showSection('games');
            document.getElementById('memory-game').classList.add('active');
            resetMemoryGame();
        }

        function resetMemoryGame() {
            gameStates.memory = { moves: 0, matches: 0, time: 0, gameRunning: true };
            memoryCards = [...cardEmojis, ...cardEmojis].sort(() => Math.random() - 0.5);
            flippedCards = [];
            
            const grid = document.getElementById('memory-grid');
            grid.innerHTML = '';
            
            memoryCards.forEach((emoji, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.emoji = emoji;
                card.dataset.index = index;
                card.addEventListener('click', flipCard);
                grid.appendChild(card);
            });
            
            startMemoryTimer();
            updateMemoryStats();
        }

        function flipCard(e) {
            if (!gameStates.memory.gameRunning) return;
            
            const card = e.target;
            if (card.classList.contains('flipped') || flippedCards.length >= 2) return;
            
            card.classList.add('flipped');
            card.textContent = card.dataset.emoji;
            flippedCards.push(card);
            
            if (flippedCards.length === 2) {
                gameStates.memory.moves++;
                checkMemoryMatch();
                updateMemoryStats();
            }
        }

        function checkMemoryMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.dataset.emoji === card2.dataset.emoji) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                gameStates.memory.matches++;
                showToast('Match found! 🎉', 'success');
                
                if (gameStates.memory.matches === 8) {
                    gameStates.memory.gameRunning = false;
                    showToast(`🏆 You won in ${gameStates.memory.moves} moves!`, 'success');
                    clearInterval(memoryTimer);
                }
            } else {
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    card1.textContent = '';
                    card2.textContent = '';
                }, 1000);
            }
            
            flippedCards = [];
        }

        function startMemoryTimer() {
            memoryTimer = setInterval(() => {
                if (gameStates.memory.gameRunning) {
                    gameStates.memory.time++;
                    updateMemoryStats();
                }
            }, 1000);
        }

        function updateMemoryStats() {
            document.getElementById('memory-moves').textContent = gameStates.memory.moves;
            document.getElementById('memory-matches').textContent = gameStates.memory.matches;
            
            const minutes = Math.floor(gameStates.memory.time / 60);
            const seconds = gameStates.memory.time % 60;
            document.getElementById('memory-time').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Reaction Time Game
        let reactionStartTime;
        let reactionTimeout;

        function startReactionGame() {
            showSection('games');
            document.getElementById('reaction-game').classList.add('active');
        }

        function startReactionTest() {
            const area = document.getElementById('reaction-area');
            area.style.background = 'var(--error)';
            area.textContent = 'Wait for green...';
            area.onclick = null;
            
            clearTimeout(reactionTimeout);
            reactionTimeout = setTimeout(() => {
                area.style.background = 'var(--success)';
                area.textContent = 'CLICK NOW!';
                reactionStartTime = Date.now();
                area.onclick = recordReactionTime;
            }, Math.random() * 3000 + 1000);
        }

        function recordReactionTime() {
            const reactionTime = Date.now() - reactionStartTime;
            gameStates.reaction.times.push(reactionTime);
            
            if (reactionTime < gameStates.reaction.bestTime) {
                gameStates.reaction.bestTime = reactionTime;
                showToast(`🏆 New best time: ${reactionTime}ms!`, 'success');
            } else {
                showToast(`Reaction time: ${reactionTime}ms`, 'info');
            }
            
            updateReactionStats();
            
            const area = document.getElementById('reaction-area');
            area.style.background = 'var(--accent)';
            area.textContent = 'Click to try again!';
            area.onclick = startReactionTest;
        }

        function updateReactionStats() {
            const times = gameStates.reaction.times;
            const lastTime = times[times.length - 1] || 0;
            const avgTime = times.length > 0 ? Math.round(times.reduce((a, b) => a + b) / times.length) : 0;
            
            document.getElementById('reaction-time').textContent = lastTime + 'ms';
            document.getElementById('reaction-best').textContent = 
                gameStates.reaction.bestTime === Infinity ? '∞' : gameStates.reaction.bestTime + 'ms';
            document.getElementById('reaction-avg').textContent = avgTime + 'ms';
        }

        // Virtual Piano
        const notes = {
            'C': 261.63, 'C#': 277.18, 'D': 293.66, 'D#': 311.13,
            'E': 329.63, 'F': 349.23, 'F#': 369.99, 'G': 392.00,
            'G#': 415.30, 'A': 440.00, 'A#': 466.16, 'B': 493.88
        };

        let audioContext;
        let isRecording = false;
        let recordedNotes = [];

        function initializePiano() {
            const piano = document.getElementById('piano');
            const whiteKeys = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];
            const blackKeys = ['C#', 'D#', null, 'F#', 'G#', 'A#', null];
            
            // Create white keys
            whiteKeys.forEach(note => {
                const key = document.createElement('div');
                key.className = 'piano-key';
                key.dataset.note = note;
                key.addEventListener('click', () => playNote(note));
                piano.appendChild(key);
            });
            
            // Create black keys
            blackKeys.forEach((note, index) => {
                if (note) {
                    const key = document.createElement('div');
                    key.className = 'piano-key black';
                    key.dataset.note = note;
                    key.style.left = `${(index + 1) * 52 - 15}px`;
                    key.addEventListener('click', () => playNote(note));
                    piano.appendChild(key);
                }
            });
            
            // Initialize Web Audio API
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            } catch (e) {
                console.log('Web Audio API not supported');
            }
        }

        function playNote(note) {
            if (!audioContext) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = notes[note];
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 1);
            
            // Visual feedback
            const keyElement = document.querySelector(`[data-note="${note}"]`);
            if (keyElement) {
                keyElement.classList.add('pressed');
                setTimeout(() => keyElement.classList.remove('pressed'), 200);
            }
            
            if (isRecording) {
                recordedNotes.push({ note, time: Date.now() });
            }
        }

        function playDemo() {
            const melody = ['C', 'D', 'E', 'F', 'G', 'A', 'B', 'C'];
            melody.forEach((note, index) => {
                setTimeout(() => playNote(note), index * 300);
            });
            showToast('🎵 Playing demo melody!', 'info');
        }

        function recordMode() {
            if (!isRecording) {
                isRecording = true;
                recordedNotes = [];
                showToast('🔴 Recording started!', 'success');
                document.querySelector('button[onclick="recordMode()"]').textContent = '⏹️ Stop';
            } else {
                isRecording = false;
                showToast(`🎵 Recording stopped! ${recordedNotes.length} notes recorded.`, 'info');
                document.querySelector('button[onclick="recordMode()"]').textContent = '🔴 Record';
                
                if (recordedNotes.length > 0) {
                    setTimeout(() => {
                        if (confirm('Play back your recording?')) {
                            playRecording();
                        }
                    }, 500);
                }
            }
        }

        function playRecording() {
            if (recordedNotes.length === 0) return;
            
            const startTime = recordedNotes[0].time;
            recordedNotes.forEach(({ note, time }) => {
                setTimeout(() => playNote(note), time - startTime);
            });
        }

        // Beat Maker
        let autobeatInterval;

        function playBeat(type) {
            if (!audioContext) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            const filterNode = audioContext.createBiquadFilter();
            
            oscillator.connect(filterNode);
            filterNode.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            switch (type) {
                case 'kick':
                    oscillator.frequency.value = 60;
                    oscillator.type = 'sine';
                    break;
                case 'snare':
                    oscillator.frequency.value = 200;
                    oscillator.type = 'sawtooth';
                    filterNode.frequency.value = 1000;
                    break;
                case 'hihat':
                    oscillator.frequency.value = 8000;
                    oscillator.type = 'square';
                    break;
                case 'crash':
                    oscillator.frequency.value = 4000;
                    oscillator.type = 'sawtooth';
                    break;
            }
            
            gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        function playAutobeat() {
            stopAutobeat();
            const pattern = ['kick', null, 'snare', 'hihat', 'kick', 'hihat', 'snare', null];
            let index = 0;
            
            autobeatInterval = setInterval(() => {
                if (pattern[index]) {
                    playBeat(pattern[index]);
                }
                index = (index + 1) % pattern.length;
            }, 200);
            
            showToast('🥁 Auto beat started!', 'success');
        }

        function stopAutobeat() {
            if (autobeatInterval) {
                clearInterval(autobeatInterval);
                autobeatInterval = null;
                showToast('⏹️ Beat stopped!', 'info');
            }
        }

        // Virtual Pet
        function startPetLoop() {
            setInterval(() => {
                if (gameStates.pet.happiness > 0) gameStates.pet.happiness -= 0.5;
                if (gameStates.pet.hunger > 0) gameStates.pet.hunger -= 0.3;
                if (gameStates.pet.energy > 0) gameStates.pet.energy -= 0.2;
                
                updatePetDisplay();
            }, 5000);
        }

        function petClick() {
            gameStates.pet.happiness = Math.min(100, gameStates.pet.happiness + 5);
            updatePetDisplay();
            showToast(`${gameStates.pet.name} is happy! 😊`, 'success');
            
            // Animate pet
            const petAvatar = document.getElementById('pet-avatar');
            petAvatar.style.transform = 'scale(1.2)';
            setTimeout(() => {
                petAvatar.style.transform = 'scale(1)';
            }, 200);
        }

        function feedPet() {
            gameStates.pet.hunger = Math.min(100, gameStates.pet.hunger + 20);
            gameStates.pet.happiness = Math.min(100, gameStates.pet.happiness + 10);
            updatePetDisplay();
            showToast(`${gameStates.pet.name} enjoyed the meal! 🍕`, 'success');
        }

        function playWithPet() {
            gameStates.pet.happiness = Math.min(100, gameStates.pet.happiness + 15);
            gameStates.pet.energy = Math.max(0, gameStates.pet.energy - 10);
            updatePetDisplay();
            showToast(`${gameStates.pet.name} had fun playing! 🎾`, 'success');
        }

        function petSleep() {
            gameStates.pet.energy = 100;
            gameStates.pet.happiness = Math.min(100, gameStates.pet.happiness + 5);
            updatePetDisplay();
            showToast(`${gameStates.pet.name} feels refreshed! 😴`, 'success');
        }

        function renamePet() {
            const newName = document.getElementById('pet-name-input').value.trim();
            if (newName) {
                gameStates.pet.name = newName;
                document.getElementById('pet-name').textContent = newName;
                document.getElementById('pet-name-input').value = '';
                showToast(`Pet renamed to ${newName}!`, 'success');
                saveGameData();
            }
        }

        function updatePetDisplay() {
            const { happiness, hunger, energy, name } = gameStates.pet;
            
            document.getElementById('happiness-bar').style.width = happiness + '%';
            document.getElementById('happiness-bar').textContent = Math.round(happiness) + '%';
            
            document.getElementById('hunger-bar').style.width = hunger + '%';
            document.getElementById('hunger-bar').textContent = Math.round(hunger) + '%';
            
            document.getElementById('energy-bar').style.width = energy + '%';
            document.getElementById('energy-bar').textContent = Math.round(energy) + '%';
            
            document.getElementById('pet-name').textContent = name;
            
            // Change pet mood based on stats
            const petAvatar = document.getElementById('pet-avatar');
            if (happiness < 30 || hunger < 30) {
                petAvatar.textContent = '😢';
            } else if (happiness > 80 && hunger > 80) {
                petAvatar.textContent = '😸';
            } else {
                petAvatar.textContent = '🐱';
            }
        }

        // Avatar Creator
        let currentAvatar = { face: '😊', bg: 'accent', effects: [] };

        function selectFace(face) {
            document.querySelectorAll('.control-group:first-child .avatar-option').forEach(el => 
                el.classList.remove('selected'));
            event.target.classList.add('selected');
            
            currentAvatar.face = face;
            updateAvatarPreview();
        }

        function selectBg(bg) {
            document.querySelectorAll('.control-group:nth-child(2) .avatar-option').forEach(el => 
                el.classList.remove('selected'));
            event.target.classList.add('selected');
            
            currentAvatar.bg = bg;
            updateAvatarPreview();
        }

        function toggleEffect(effect) {
            const index = currentAvatar.effects.indexOf(effect);
            if (index > -1) {
                currentAvatar.effects.splice(index, 1);
                event.target.classList.remove('selected');
            } else {
                currentAvatar.effects.push(effect);
                event.target.classList.add('selected');
            }
            updateAvatarPreview();
        }

        function updateAvatarPreview() {
            const preview = document.getElementById('avatar-preview');
            preview.textContent = currentAvatar.face;
            
            // Remove old classes
            preview.className = 'avatar-preview glow-effect';
            
            // Apply background
            const bgColors = {
                'accent': 'var(--accent)',
                'secondary': 'var(--secondary)',
                'success': 'var(--success)',
                'warning': 'var(--warning)',
                'error': 'var(--error)'
            };
            preview.style.background = bgColors[currentAvatar.bg];
            
            // Apply effects
            currentAvatar.effects.forEach(effect => {
                switch (effect) {
                    case 'glow':
                        preview.style.boxShadow = '0 0 40px var(--neon-blue)';
                        break;
                    case 'rainbow':
                        preview.classList.add('rainbow-text');
                        break;
                    case 'bounce':
                        preview.style.animation = 'bounce 0.5s ease infinite';
                        break;
                    case 'spin':
                        preview.style.animation = 'spin 2s linear infinite';
                        break;
                    case 'pulse':
                        preview.style.animation = 'pulse 1s ease infinite';
                        break;
                }
            });
        }

        function saveAvatar() {
            gameStates.avatar = { ...currentAvatar };
            saveGameData();
            showToast('💾 Avatar saved!', 'success');
        }

        function randomAvatar() {
            const faces = ['😊', '😎', '🤔', '😈', '🤖', '👻'];
            const backgrounds = ['accent', 'secondary', 'success', 'warning', 'error'];
            const effects = ['glow', 'rainbow', 'bounce', 'spin', 'pulse'];
            
            currentAvatar.face = faces[Math.floor(Math.random() * faces.length)];
            currentAvatar.bg = backgrounds[Math.floor(Math.random() * backgrounds.length)];
            currentAvatar.effects = Math.random() > 0.5 ? [effects[Math.floor(Math.random() * effects.length)]] : [];
            
            updateAvatarPreview();
            showToast('🎲 Random avatar generated!', 'success');
        }

        function shareAvatar() {
            const avatarData = `My avatar: ${currentAvatar.face} with ${currentAvatar.bg} background!`;
            if (navigator.share) {
                navigator.share({ text: avatarData });
            } else {
                navigator.clipboard.writeText(avatarData);
                showToast('📋 Avatar data copied to clipboard!', 'success');
            }
        }

        // Data Persistence
        function saveGameData() {
            localStorage.setItem('techHubGameData', JSON.stringify(gameStates));
        }

        function loadGameData() {
            const saved = localStorage.getItem('techHubGameData');
            if (saved) {
                const data = JSON.parse(saved);
                gameStates = { ...gameStates, ...data };
                updateAllStats();
            }
        }

        function updateAllStats() {
            updateSnakeStats();
            updateMemoryStats();
            updateReactionStats();
            updatePetDisplay();
            currentAvatar = gameStates.avatar;
            updateAvatarPreview();
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                switch (e.key) {
                    case '1':
                        e.preventDefault();
                        showSection('home');
                        break;
                    case '2':
                        e.preventDefault();
                        showSection('games');
                        break;
                    case '3':
                        e.preventDefault();
                        showSection('music');
                        break;
                    case '4':
                        e.preventDefault();
                        showSection('avatars');
                        break;
                    case '5':
                        e.preventDefault();
                        showSection('pet');
                        break;
                }
            }
        });

        // Performance optimization
        let lastScrollTime = 0;
        window.addEventListener('scroll', () => {
            const now = Date.now();
            if (now - lastScrollTime > 16) { // 60fps throttling
                lastScrollTime = now;
                // Add scroll-based animations here if needed
            }
        });

        // Initialize everything
        showToast('🎮 Welcome to TechHub Interactive! Use Ctrl+1-5 for quick navigation.', 'success');
    </script>
</body>
</html>
