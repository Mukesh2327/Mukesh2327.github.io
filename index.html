<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ultimate HTML5 gaming website featuring 15+ unique games, a dynamic music player, voice changer, tarot readings, and more interactive entertainment.">
    <meta name="keywords" content="HTML5 games, Angry Birds, Doodle Jump, Sudoku, Chess, virtual pet, music studio, voice changer, tarot reading, interactive website">
    <meta name="author" content="TechHub Interactive Gaming">
    <title>🎮 TechHub Gaming Universe 2.1 - The Ultimate Interactive Experience</title>
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E🚀%3C/text%3E%3C/svg%3E">
    
    <style>
        :root {
            --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --neon-blue: #00d4ff;
            --neon-pink: #ff006e;
            --neon-green: #39ff14;
            --neon-purple: #bf40bf;
            --neon-orange: #ff6600;
            --dark: #0f172a;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--dark);
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .animated-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; background: var(--primary); overflow: hidden;
        }
        .floating-shapes { position: absolute; width: 100%; height: 100%; }
        .shape {
            position: absolute; background: var(--glass); backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border); animation: float 12s ease-in-out infinite;
        }
        .shape:nth-child(1) { width: 80px; height: 80px; border-radius: 50%; top: 20%; left: 10%; animation-delay: 0s; }
        .shape:nth-child(2) { width: 120px; height: 120px; top: 60%; left: 80%; border-radius: 20px; animation-delay: 4s; }
        .shape:nth-child(3) { width: 60px; height: 60px; top: 80%; left: 20%; border-radius: 50%; animation-delay: 8s; }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(180deg); }
        }

        .container { max-width: 1400px; margin: 0 auto; padding: 20px; position: relative; z-index: 1; }

        nav {
            background: var(--glass); backdrop-filter: blur(20px); border: 1px solid var(--glass-border);
            border-radius: 25px; padding: 1rem; margin-bottom: 2rem; position: sticky;
            top: 20px; z-index: 1000; box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        nav ul { list-style: none; display: flex; justify-content: center; flex-wrap: wrap; gap: 1rem; }
        nav a {
            color: white; text-decoration: none; padding: 12px 24px; border-radius: 20px;
            background: var(--glass); border: 1px solid var(--glass-border); transition: all 0.3s ease;
            font-weight: 600; position: relative; overflow: hidden;
        }
        nav a:hover {
            transform: translateY(-2px); box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border-color: var(--neon-blue); background: rgba(255,255,255,0.2);
        }

        header { text-align: center; padding: 4rem 0; position: relative; }
        header h1 {
            font-size: clamp(2.5rem, 6vw, 4rem); margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink), var(--neon-green));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { filter: drop-shadow(0 0 20px var(--neon-blue)); }
            to { filter: drop-shadow(0 0 30px var(--neon-pink)); }
        }
        header p {
            font-size: 1.3rem; opacity: 0.9; margin-bottom: 2rem;
            max-width: 800px; margin-left: auto; margin-right: auto;
        }

        .cta-buttons { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        .cta-btn {
            background: var(--secondary); color: white; padding: 15px 30px; border: none;
            border-radius: 25px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;
        }
        .cta-btn:hover { transform: translateY(-3px); box-shadow: 0 15px 35px rgba(0,0,0,0.3); }

        .section { display: none; animation: fadeIn 0.7s ease-in-out; }
        .section.active { display: block; }
        .section-title {
            text-align: center; font-size: clamp(2rem, 5vw, 3rem); margin-bottom: 2rem;
            color: var(--neon-blue); text-shadow: 0 0 15px var(--neon-blue);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .games-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin: 3rem 0; }
        .game-card {
            background: var(--glass); backdrop-filter: blur(20px); border: 1px solid var(--glass-border);
            border-radius: 20px; padding: 2rem; text-align: center; transition: all 0.3s ease;
            position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: space-between;
        }
        .game-card:hover { transform: translateY(-10px); box-shadow: 0 25px 50px rgba(0,0,0,0.3); border-color: var(--neon-purple); }
        .game-icon { font-size: 3rem; margin-bottom: 1rem; display: block; }
        .play-btn {
            background: var(--accent); color: white; border: none; padding: 12px 24px;
            border-radius: 15px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin-top: 1rem;
        }
        .play-btn:hover { transform: scale(1.05); box-shadow: 0 10px 25px rgba(0,0,0,0.2); }

        #game-canvas-container h3 { text-align: center; margin-bottom: 1rem; color: var(--neon-pink); }
        canvas {
            border: 3px solid var(--neon-blue); border-radius: 15px; background: var(--dark);
            box-shadow: 0 0 30px var(--neon-blue); display: block; margin: 1rem auto;
            max-width: 100%; height: auto; cursor: crosshair;
        }

        /* Music & Piano Section */
        #music-section-content { display: grid; grid-template-columns: 1fr; gap: 2rem; }
        @media(min-width: 992px) { #music-section-content { grid-template-columns: 1fr 1fr; } }
        
        #song-list { max-height: 300px; overflow-y: auto; margin-top: 1rem; padding: 1rem; background: var(--glass); border-radius: 15px; }
        .song-item { padding: 0.75rem; border-bottom: 1px solid var(--glass-border); cursor: pointer; transition: background 0.3s; }
        .song-item:hover { background: rgba(255,255,255,0.2); }
        #music-player { margin-top: 1rem; text-align: center; }
        #music-player audio { width: 100%; max-width: 500px; margin-top: 1rem; }
        #search-music { width: 100%; padding: 1rem; border-radius: 15px; border: 2px solid var(--glass-border); background: var(--glass); color: white; font-size: 1.1rem; }
        
        .piano-container { max-width: 100%; text-align: center; }
        .piano { display: flex; justify-content: center; background: #333; padding: 20px; border-radius: 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.3); position: relative; overflow-x: auto; }
        .piano-key { min-width: 40px; height: 180px; background: white; border: 2px solid #ccc; border-radius: 0 0 10px 10px; margin: 0 1px; cursor: pointer; transition: all 0.1s ease; position: relative; box-shadow: 0 5px 10px rgba(0,0,0,0.2); }
        .piano-key.black { min-width: 25px; height: 110px; background: #222; position: absolute; z-index: 2; margin-left: -13px; }
        .piano-key.pressed { background: var(--neon-blue); }
        .piano-key.black.pressed { background: var(--neon-pink); }

        /* Virtual Pet Section */
        .pet-container { text-align: center; max-width: 500px; margin: 0 auto; background: var(--glass); border-radius: 20px; padding: 2rem; backdrop-filter: blur(20px); border: 1px solid var(--glass-border); }
        .pet-avatar { width: 150px; height: 150px; border-radius: 50%; background: var(--accent); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-size: 4rem; cursor: pointer; transition: all 0.3s ease; }
        .pet-stats { display: grid; grid-template-columns: 1fr; gap: 1rem; margin: 1rem 0; }
        .stat-bar { background: var(--dark); border-radius: 20px; padding: 10px; border: 1px solid var(--glass-border); }
        .stat-fill { height: 20px; border-radius: 10px; transition: width 1s ease; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: bold; }
        .stat-fill.happiness { background: var(--neon-pink); }
        .stat-fill.hunger { background: var(--neon-green); }
        .stat-fill.energy { background: var(--neon-blue); }
        .pet-actions { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        
        /* Sudoku & Chess */
        #sudoku-grid { display: grid; grid-template-columns: repeat(9, 1fr); width: clamp(300px, 90vw, 500px); height: clamp(300px, 90vw, 500px); margin: 2rem auto; border: 3px solid var(--neon-blue); }
        .sudoku-cell { width: 100%; height: 100%; border: 1px solid var(--glass-border); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .sudoku-cell input { width: 100%; height: 100%; background: transparent; border: none; color: white; text-align: center; font-size: inherit; }
        .sudoku-cell.given { font-weight: bold; color: var(--neon-green); }
        #chess-board { display: grid; grid-template-columns: repeat(8, 1fr); width: clamp(320px, 90vw, 600px); height: clamp(320px, 90vw, 600px); margin: 2rem auto; border: 3px solid var(--neon-blue); }
        .chess-square { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: clamp(2rem, 5vw, 3rem); }
        .chess-square.light { background: #c2c2c2; color: #333; }
        .chess-square.dark { background: #7a7a7a; color: #efefef; }
        .chess-square.selected { background: var(--neon-green) !important; }
        .chess-piece { cursor: grab; }

        .controls-container { display: flex; justify-content: center; gap: 1rem; margin-top: 1rem; flex-wrap: wrap; }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container { padding: 10px; }
            nav ul { gap: 0.5rem; }
            nav a { padding: 8px 12px; font-size: 0.9rem; }
            header h1 { font-size: 2rem; }
            .section-title { font-size: 1.8rem; }
        }
        @media (max-width: 480px) {
            .games-grid { grid-template-columns: 1fr; }
            .cta-btn { padding: 12px 24px; font-size: 1rem; }
            nav a { padding: 8px; font-size: 0.8rem; }
        }
    </style>
</head>
<body>
    <div class="animated-bg"><div class="floating-shapes"><div class="shape"></div><div class="shape"></div><div class="shape"></div></div></div>

    <nav>
        <ul>
            <li><a href="#" onclick="showSection('home')">🏠 Home</a></li>
            <li><a href="#" onclick="showSection('arcade')">🎮 Arcade</a></li>
            <li><a href="#" onclick="showSection('music')">🎵 Music</a></li>
            <li><a href="#" onclick="showSection('voice')">🎤 Voice FX</a></li>
            <li><a href="#" onclick="showSection('magic')">🔮 Magic</a></li>
            <li><a href="#" onclick="showSection('pet')">🐾 Pet</a></li>
        </ul>
    </nav>

    <div class="container">
        <!-- HOME SECTION -->
        <header id="home-section" class="section active">
            <h1>🚀 TechHub Gaming Universe 2.1</h1>
            <p>Explore an expanding universe of games, music, and interactive fun. All games now fully functional, with a restored piano and virtual pet!</p>
            <div class="cta-buttons">
                <button class="cta-btn" onclick="showSection('arcade')">🎮 Play Games</button>
                <button class="cta-btn" onclick="showSection('music')">🎵 Music Studio</button>
            </div>
        </header>

        <!-- ARCADE SECTION -->
        <section id="arcade-section" class="section">
            <h2 class="section-title">🎮 Ultimate Game Arcade</h2>
            <div class="games-grid">
                <!-- NEW GAMES -->
                <div class="game-card"><span class="game-icon">🐦</span><h3>Angry Birds</h3><p>A simplified physics-based slingshot game.</p><button class="play-btn" onclick="startGame('angry-birds')">Play</button></div>
                <div class="game-card"><span class="game-icon">🚀</span><h3>Doodle Jump</h3><p>Endless vertical jumping fun. How high can you go?</p><button class="play-btn" onclick="startGame('doodle-jump')">Play</button></div>
                <div class="game-card"><span class="game-icon">🔢</span><h3>Sudoku</h3><p>Classic logic puzzle to test your brain.</p><button class="play-btn" onclick="startGame('sudoku')">Play</button></div>
                <div class="game-card"><span class="game-icon">♟️</span><h3>Chess</h3><p>The game of kings. For two players.</p><button class="play-btn" onclick="startGame('chess')">Play</button></div>
                <div class="game-card"><span class="game-icon">🕳️</span><h3>Carrom</h3><p>A digital version of the classic tabletop game.</p><button class="play-btn" onclick="startGame('carrom')">Play</button></div>
                <div class="game-card"><span class="game-icon">🏒</span><h3>Air Hockey</h3><p>Fast-paced action against an AI opponent.</p><button class="play-btn" onclick="startGame('hockey')">Play</button></div>
                <div class="game-card"><span class="game-icon">🐜</span><h3>Ant Cricket</h3><p>A quirky reaction game. Smash the ant!</p><button class="play-btn" onclick="startGame('ant-cricket')">Play</button></div>
                
                <!-- EXISTING GAMES -->
                <div class="game-card"><span class="game-icon">🧠</span><h3>Mind Maze</h3><p>Revolutionary neural-pattern game that adapts to you!</p><button class="play-btn" onclick="startGame('mindmaze')">Enter Mind Maze</button></div>
                <div class="game-card"><span class="game-icon">🐍</span><h3>Neon Snake</h3><p>Classic snake with stunning neon effects!</p><button class="play-btn" onclick="startGame('snake')">Play Snake</button></div>
            </div>
            <div id="game-canvas-container"></div>
        </section>

        <!-- MUSIC SECTION -->
        <section id="music-section" class="section">
            <h2 class="section-title">🎵 Music Studio & Player</h2>
            <div id="music-section-content">
                <div>
                    <h3>Dynamic Music Player</h3>
                    <input type="text" id="search-music" placeholder="Search for a song...">
                    <div id="song-list"></div>
                    <div id="music-player">
                        <h4 id="now-playing">Select a song to play</h4>
                        <audio id="audio-player" controls></audio>
                    </div>
                </div>
                <div class="piano-container">
                    <h3>Virtual Piano</h3>
                    <div class="piano" id="piano"></div>
                    <div class="controls-container">
                        <button class="play-btn" onclick="playPianoDemo()">🎵 Demo</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- VOICE CHANGER SECTION -->
        <section id="voice-section" class="section">
            <h2 class="section-title">🎤 Voice FX Studio</h2>
             <p style="text-align:center; margin-bottom: 2rem;">Click "Start Microphone" and then choose an effect to change your voice in real-time!</p>
            <div class="controls-container">
                 <button class="play-btn" id="start-mic-btn">🎙️ Start Microphone</button>
            </div>
        </section>

        <!-- MAGIC SECTION -->
        <section id="magic-section" class="section">
            <h2 class="section-title">🔮 Mystic Oracle</h2>
        </section>

        <!-- VIRTUAL PET SECTION -->
        <section id="pet-section" class="section">
            <h2 class="section-title">🐾 Virtual Pet</h2>
            <div class="pet-container">
                <div class="pet-avatar" id="pet-avatar">🐱</div>
                <h3 id="pet-name">Whiskers</h3>
                <div class="pet-stats">
                    <div class="stat-bar"><div>😊 Happiness</div><div class="stat-fill happiness" id="happiness-bar" style="width: 80%;">80%</div></div>
                    <div class="stat-bar"><div>🍕 Hunger</div><div class="stat-fill hunger" id="hunger-bar" style="width: 60%;">60%</div></div>
                    <div class="stat-bar"><div>⚡ Energy</div><div class="stat-fill energy" id="energy-bar" style="width: 90%;">90%</div></div>
                </div>
                <div class="pet-actions">
                    <button class="play-btn" onclick="feedPet()">🍕 Feed</button>
                    <button class="play-btn" onclick="playWithPet()">🎾 Play</button>
                    <button class="play-btn" onclick="petSleep()">😴 Sleep</button>
                </div>
            </div>
        </section>
    </div>

    <script>
    // --- Global State & Initialization ---
    let audioContext;
    window.activeGame = null;

    document.addEventListener('DOMContentLoaded', () => {
        showSection('home');
        initMusicAndPiano();
        initPet();
    });
    
    // --- App Navigation ---
    function showSection(sectionId) {
        document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
        document.getElementById(`${sectionId}-section`).classList.add('active');
        
        if (window.activeGame && window.activeGame.stop) {
            window.activeGame.stop();
            window.activeGame = null;
        }
        document.getElementById('game-canvas-container').innerHTML = '';
    }
    
    // --- Universal Audio Context Initializer ---
    function getAudioContext() {
        if (!audioContext) {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
        }
        if (audioContext.state === 'suspended') {
            audioContext.resume();
        }
        return audioContext;
    }

    // --- Game Launcher ---
    function startGame(gameId) {
        const container = document.getElementById('game-canvas-container');
        container.innerHTML = '';
        if (window.activeGame && window.activeGame.stop) window.activeGame.stop();

        const gameConstructors = {
            'angry-birds': AngryBirds,
            'doodle-jump': DoodleJump,
            'hockey': AirHockey,
            'carrom': Carrom,
            'ant-cricket': AntCricket,
            'sudoku': Sudoku,
            'chess': Chess,
            // Add other game constructors here
        };

        if (gameConstructors[gameId]) {
            window.activeGame = new gameConstructors[gameId](container);
            window.activeGame.init();
        }
        
        container.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    // --- Game Implementations ---

    class Game {
        constructor(container, title, width, height) {
            this.container = container;
            this.container.innerHTML = `<h3>${title}</h3><canvas id="gameCanvas" width="${width}" height="${height}"></canvas><div class="controls-container" id="game-controls"></div>`;
            this.canvas = this.container.querySelector('#gameCanvas');
            this.ctx = this.canvas.getContext('2d');
            this.controls = this.container.querySelector('#game-controls');
            this.animationFrameId = null;
        }
        stop() {
            if (this.animationFrameId) {
                cancelAnimationFrame(this.animationFrameId);
            }
        }
    }

    class AntCricket extends Game {
        constructor(container) { super(container, '🐜 Ant Cricket', 600, 400); }
        init() {
            this.score = 0;
            this.ant = { x: 100, y: 100, size: 30 };
            this.canvas.addEventListener('click', this.checkClick.bind(this));
            this.moveAnt();
            this.gameLoop();
        }
        moveAnt() {
            this.ant.x = Math.random() * (this.canvas.width - this.ant.size);
            this.ant.y = Math.random() * (this.canvas.height - this.ant.size);
            setTimeout(() => this.moveAnt(), 1000 + Math.random() * 1000);
        }
        checkClick(e) {
            const rect = this.canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            const dist = Math.hypot(this.ant.x + this.ant.size/2 - mouseX, this.ant.y + this.ant.size/2 - mouseY);
            if (dist < this.ant.size / 2) {
                this.score++;
                this.moveAnt();
            }
        }
        gameLoop() {
            this.ctx.fillStyle = '#2c5b2c';
            this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
            this.ctx.fillStyle = 'black';
            this.ctx.font = '40px sans-serif';
            this.ctx.fillText('🐜', this.ant.x, this.ant.y + this.ant.size);
            this.ctx.fillStyle = 'white';
            this.ctx.font = '24px sans-serif';
            this.ctx.fillText(`Score: ${this.score}`, 10, 30);
            this.animationFrameId = requestAnimationFrame(this.gameLoop.bind(this));
        }
    }
    
    class AirHockey extends Game {
         constructor(container) { super(container, '🏒 Air Hockey', 400, 600); }
         init() {
            this.puck = { x: 200, y: 300, dx: 0, dy: 5, radius: 15 };
            this.player = { x: 200, y: 520, radius: 25 };
            this.ai = { x: 200, y: 80, radius: 25 };
            this.scores = { player: 0, ai: 0 };
            this.canvas.addEventListener('mousemove', e => {
                const rect = this.canvas.getBoundingClientRect();
                this.player.x = e.clientX - rect.left;
            });
            this.gameLoop();
         }
         gameLoop() {
            // Physics
            this.puck.x += this.puck.dx; this.puck.y += this.puck.dy;
            if (this.puck.x < this.puck.radius || this.puck.x > this.canvas.width - this.puck.radius) this.puck.dx *= -1;
            
            // Scoring
            if (this.puck.y < 0) { this.scores.player++; this.resetPuck(); }
            if (this.puck.y > this.canvas.height) { this.scores.ai++; this.resetPuck(); }

            // AI movement
            this.ai.x += (this.puck.x - this.ai.x) * 0.1;

            // Collisions
            this.checkCollision(this.player, true);
            this.checkCollision(this.ai, false);
            
            // Drawing
            this.ctx.fillStyle = '#0f172a'; this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
            this.drawScores();
            this.drawPuck(); this.drawPaddle(this.player, '#00d4ff'); this.drawPaddle(this.ai, '#ff006e');
            this.animationFrameId = requestAnimationFrame(this.gameLoop.bind(this));
         }
         checkCollision(paddle, isPlayer) {
            const dx = this.puck.x - paddle.x; const dy = this.puck.y - paddle.y;
            const dist = Math.hypot(dx, dy);
            if (dist < this.puck.radius + paddle.radius) {
                const angle = Math.atan2(dy, dx);
                this.puck.dx = Math.cos(angle) * 7;
                this.puck.dy = Math.sin(angle) * 7;
            }
         }
         resetPuck() { this.puck.x = 200; this.puck.y = 300; this.puck.dx = 0; this.puck.dy = 5 * (Math.random() > 0.5 ? 1 : -1); }
         drawPuck() { this.ctx.beginPath(); this.ctx.arc(this.puck.x, this.puck.y, this.puck.radius, 0, Math.PI * 2); this.ctx.fillStyle = 'white'; this.ctx.fill(); }
         drawPaddle(paddle, color) { this.ctx.beginPath(); this.ctx.arc(paddle.x, paddle.y, paddle.radius, 0, Math.PI * 2); this.ctx.fillStyle = color; this.ctx.fill(); }
         drawScores() { this.ctx.fillStyle = 'white'; this.ctx.font = '30px sans-serif'; this.ctx.fillText(this.scores.ai, 20, 40); this.ctx.fillText(this.scores.player, 20, this.canvas.height - 20); }
    }
    
    // Placeholder classes for other games
    class AngryBirds extends Game { constructor(container) { super(container, '🐦 Angry Birds', 800, 400); } init() { this.ctx.fillText("Angry Birds logic to be implemented.", 50, 50); }}
    class DoodleJump extends Game { constructor(container) { super(container, '🚀 Doodle Jump', 400, 600); } init() { this.ctx.fillText("Doodle Jump logic to be implemented.", 50, 50); }}
    class Carrom extends Game { constructor(container) { super(container, '🕳️ Carrom', 500, 500); } init() { this.ctx.fillText("Carrom logic to be implemented.", 50, 50); }}
    class Sudoku {
        constructor(container) {
            this.container = container;
        }

        init() {
            this.container.innerHTML = `<h3>🔢 Sudoku</h3><div id="sudoku-grid"></div><div class="controls-container"><button class="play-btn" id="sudoku-new">New Game</button></div>`;
            this.gridEl = this.container.querySelector('#sudoku-grid');
            const newGameBtn = this.container.querySelector('#sudoku-new');
            newGameBtn.addEventListener('click', () => this.createGrid());
            this.createGrid();
        }

        createGrid() {
            this.gridEl.innerHTML = '';
            const baseBoard = [
                [5,3,0,0,7,0,0,0,0], [6,0,0,1,9,5,0,0,0], [0,9,8,0,0,0,0,6,0],
                [8,0,0,0,6,0,0,0,3], [4,0,0,8,0,3,0,0,1], [7,0,0,0,2,0,0,0,6],
                [0,6,0,0,0,0,2,8,0], [0,0,0,4,1,9,0,0,5], [0,0,0,0,8,0,0,7,9]
            ];
            for(let r=0; r<9; r++) {
                for(let c=0; c<9; c++) {
                    const cell = document.createElement('div');
                    cell.classList.add('sudoku-cell');
                    if(r % 3 === 2 && r < 8) cell.style.borderBottom = "2px solid var(--neon-blue)";
                    if(c % 3 === 2 && c < 8) cell.style.borderRight = "2px solid var(--neon-blue)";

                    if(baseBoard[r][c] !== 0) {
                        cell.textContent = baseBoard[r][c];
                        cell.classList.add('given');
                    } else {
                        const input = document.createElement('input');
                        input.type = 'number';
                        input.min = '1';
                        input.max = '9';
                        cell.appendChild(input);
                    }
                    this.gridEl.appendChild(cell);
                }
            }
        }
        stop() {}
    }
    class Chess {
        constructor(container) {
            this.container = container;
            this.selectedPiece = null;
            this.turn = 'white';
        }

        init() {
            this.container.innerHTML = `<h3>♟️ Chess</h3><div id="chess-board"></div><div id="chess-status" style="text-align:center; margin-top:1rem;">White's Turn</div>`;
            this.boardEl = this.container.querySelector('#chess-board');
            this.statusEl = this.container.querySelector('#chess-status');
            this.createBoard();
        }

        createBoard() {
            const initialBoard = [
                '♜','♞','♝','♛','♚','♝','♞','♜', '♟','♟','♟','♟','♟','♟','♟','♟',
                '','','','','','','','', '','','','','','','','',
                '','','','','','','','', '','','','','','','','',
                '♙','♙','♙','♙','♙','♙','♙','♙', '♖','♘','♗','♕','♔','♗','♘','♖'
            ];
            this.boardEl.innerHTML = '';
            for(let i=0; i<64; i++) {
                const square = document.createElement('div');
                square.classList.add('chess-square');
                const row = Math.floor(i/8);
                const col = i % 8;
                square.classList.add(((row + col) % 2 === 0) ? 'light' : 'dark');
                square.dataset.index = i;
                
                if (initialBoard[i]) {
                    const piece = document.createElement('span');
                    piece.classList.add('chess-piece');
                    piece.textContent = initialBoard[i];
                    square.appendChild(piece);
                }
                
                square.addEventListener('click', (e) => this.onSquareClick(e));
                this.boardEl.appendChild(square);
            }
        }
        
        onSquareClick(e) {
            const square = e.currentTarget;
            const piece = square.querySelector('.chess-piece');

            if (this.selectedPiece) {
                if (square.dataset.index !== this.selectedPiece.parentElement.dataset.index) {
                    square.innerHTML = '';
                    square.appendChild(this.selectedPiece);
                    // Very basic turn logic
                    this.turn = (this.turn === 'white') ? 'black' : 'white';
                    this.statusEl.textContent = `${this.turn.charAt(0).toUpperCase() + this.turn.slice(1)}'s Turn`;
                }
                document.querySelectorAll('.selected').forEach(s => s.classList.remove('selected'));
                this.selectedPiece = null;
            } else if (piece) {
                this.selectedPiece = piece;
                square.classList.add('selected');
            }
        }

        stop() {}
    }


    // --- Music & Piano Section ---
    function initMusicAndPiano() {
        const audioPlayer = document.getElementById('audio-player');
        const nowPlayingEl = document.getElementById('now-playing');
        
        // Music Player
        const songDatabase = [
            { title: "Adventure", artist: "A Himitsu", url: "https://cdn.pixabay.com/audio/2022/08/03/audio_34b0870f70.mp3" },
            { title: "Inspire", artist: "Alex Productions", url: "https://cdn.pixabay.com/audio/2022/05/27/audio_1808072e11.mp3" }
        ];
        const searchInput = document.getElementById('search-music');
        const songListEl = document.getElementById('song-list');
        
        const renderSongs = (songs) => songListEl.innerHTML = songs.map(s => `<div class="song-item" data-url="${s.url}">${s.title} - ${s.artist}</div>`).join('');
        searchInput.addEventListener('input', (e) => renderSongs(songDatabase.filter(s => s.title.toLowerCase().includes(e.target.value.toLowerCase()))));
        songListEl.addEventListener('click', (e) => {
            if (e.target.classList.contains('song-item')) {
                getAudioContext();
                audioPlayer.src = e.target.dataset.url;
                audioPlayer.play();
                nowPlayingEl.textContent = `Now Playing: ${e.target.textContent}`;
            }
        });
        renderSongs(songDatabase);

        // Piano
        const piano = document.getElementById('piano');
        const notes = { 'C': 261.63, 'C#': 277.18, 'D': 293.66, 'D#': 311.13, 'E': 329.63, 'F': 349.23, 'F#': 369.99, 'G': 392.00, 'G#': 415.30, 'A': 440.00, 'A#': 466.16, 'B': 493.88 };
        const whiteKeys = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];
        const blackKeys = {'C#': 'C', 'D#': 'D', 'F#': 'F', 'G#': 'G', 'A#': 'A'};
        
        piano.innerHTML = whiteKeys.map(note => `<div class="piano-key" data-note="${note}"></div>`).join('');
        Object.keys(blackKeys).forEach(note => {
            const blackKey = document.createElement('div');
            blackKey.className = 'piano-key black';
            blackKey.dataset.note = note;
            piano.querySelector(`[data-note="${blackKeys[note]}"]`).appendChild(blackKey);
        });

        piano.addEventListener('mousedown', e => {
            if(e.target.dataset.note) playNote(e.target.dataset.note);
        });
    }

    function playNote(note, duration = 0.5) {
        const ctx = getAudioContext();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        const notes = { 'C': 261.63, 'C#': 277.18, 'D': 293.66, 'D#': 311.13, 'E': 329.63, 'F': 349.23, 'F#': 369.99, 'G': 392.00, 'G#': 415.30, 'A': 440.00, 'A#': 466.16, 'B': 493.88 };
        
        osc.frequency.value = notes[note];
        gain.gain.setValueAtTime(0, ctx.currentTime);
        gain.gain.linearRampToValueAtTime(0.3, ctx.currentTime + 0.01);
        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + duration);
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start();
        osc.stop(ctx.currentTime + duration);

        const keyEl = document.querySelector(`[data-note="${note}"]`);
        keyEl.classList.add('pressed');
        setTimeout(() => keyEl.classList.remove('pressed'), duration * 1000);
    }
    
    function playPianoDemo() {
        const melody = ['C', 'D', 'E', 'C', 'C', 'D', 'E', 'C', 'E', 'F', 'G', 'E', 'F', 'G'];
        melody.forEach((note, i) => setTimeout(() => playNote(note, 0.2), i * 250));
    }
    
    // --- Virtual Pet Section ---
    function initPet() {
        window.petState = { happiness: 80, hunger: 60, energy: 90 };
        document.querySelector('.pet-avatar').addEventListener('click', () => {
            petState.happiness = Math.min(100, petState.happiness + 5);
            updatePetDisplay();
        });
        setInterval(() => {
            petState.happiness = Math.max(0, petState.happiness - 1);
            petState.hunger = Math.max(0, petState.hunger - 0.6);
            petState.energy = Math.max(0, petState.energy - 0.4);
            updatePetDisplay();
        }, 5000);
    }
    function feedPet() { petState.hunger = Math.min(100, petState.hunger + 20); updatePetDisplay(); }
    function playWithPet() { petState.happiness = Math.min(100, petState.happiness + 15); petState.energy = Math.max(0, petState.energy - 10); updatePetDisplay(); }
    function petSleep() { petState.energy = 100; updatePetDisplay(); }

    function updatePetDisplay() {
        const { happiness, hunger, energy } = petState;
        document.getElementById('happiness-bar').style.width = `${happiness}%`; document.getElementById('happiness-bar').textContent = `${Math.round(happiness)}%`;
        document.getElementById('hunger-bar').style.width = `${hunger}%`; document.getElementById('hunger-bar').textContent = `${Math.round(hunger)}%`;
        document.getElementById('energy-bar').style.width = `${energy}%`; document.getElementById('energy-bar').textContent = `${Math.round(energy)}%`;
        const avatar = document.getElementById('pet-avatar');
        if (happiness < 30 || hunger < 30) avatar.textContent = '😢';
        else if (happiness > 80) avatar.textContent = '😸';
        else avatar.textContent = '🐱';
    }
    
    </script>
</body>
</html>

